# Python {#python}

## Getting started {#getting-started-with-python}

### Python on Scholar {#python-on-scholar}

Each year we provide students with a working Python kernel that students are able to select and use from within https://notebook.scholar.rcac.purdue.edu/ as well as within an Rmarkdown document in https://rstudio.scholar.rcac.purdue.edu/. We ask that students use this kernel when completing all Python-related questions for the course. This ensures version consistency for Python and all packages that students will use during the academic year. In addition, this enables staff to quickly modify the Python environment for all students should the need arise.

Let's configure this so every time you access https://notebook.scholar.rcac.purdue.edu/ or https://rstudio.scholar.rcac.purdue.edu/, you will have access to the proper kernel, and the default version of python is correct. Navigate to https://rstudio.scholar.rcac.purdue.edu/, and login using your Purdue credentials.  In the menu, click `Tools > Shell...`. 

You should be presented with a shell towards the bottom left. Click within the shell, and type the following followed by pressing Enter or Return:

`/class/datamine/apps/runme`

After executing the script, in the menu, click `Session > Restart R`. 

In order to run Python within https://rstudio.scholar.rcac.purdue.edu/, log in to https://rstudio.scholar.rcac.purdue.edu/ and run the following in the Console or in an R code chunk:

```{r, eval=F}
datamine_py()
install.packages("reticulate")
```

The function `datamine_py` "activates" the Python environment we have setup for the course. Any time you want to use our environment, simply run the R function at the beginning of any R Session, _prior_ to running anything Python code chunks.

To test if the Python environment is working within https://rstudio.scholar.rcac.purdue.edu/, run the following in a Python code chunk:

```{python, eval=F}
import sys
print(sys.executable)
```

The python executable should be located in the appropriate folder in the following path: `/class/datamine/apps/python/`.

The `runme` script also adds a kernel to the list of kernels shown in https://notebook.scholar.rcac.purdue.edu/. 

To test if the kernel is available and working, navigate to https://notebook.scholar.rcac.purdue.edu/, login, click on `New`, and select the kernel matching the current year. For example, you would select `f2020-s2021` for the 2020-2021 academic year. Once the notebook has launched, you can confirm the version of Python by running the following in a code cell:

```{python, eval=F}
import sys
print(sys.executable)
```

The python executable should be located in the appropriate folder in the following path: `/class/datamine/apps/python/`.

If you already have a a Jupyter notebook running at https://notebook.scholar.rcac.purdue.edu/, you may need to refresh in order for the kernel to appear as an option in `Kernel > Change Kernel`.

If you would like to use the Python environment that is put together for this class, from within a terminal on Scholar, run the following:

```{bash, eval=F}
source /class/datamine/apps/python.sh
```

This will load the environment and `python` will launch our environment's interpreter.

## Lists & Tuples {#p-lists-and-tuples}

Lists and tuples are two of the primary data types in Python. 

### List methods

The following is a table of list methods from [w3schools.com](https://www.w3schools.com/python/python_lists_methods.asp).

|Method|Description|
|------|-----------|
|append()|Adds an element at the end of the list|
|clear()|Removes all the elements from the list|
|copy()|Returns a copy of the list|
|count()|Returns the number of elements with the specified value|
|extend()|Add the elements of a list (or any iterable), to the end of the current list|
|index()|Returns the index of the first element with the specified value|
|insert()|Adds an element at the specified position|
|pop()|Removes the element at the specified position|
|remove()|Removes the item with the specified value|
|reverse()|Reverses the order of the list|
|sort()|Sorts the list|

### Tuple methods

## Dicts {#p-dicts}

## Control flow {#p-control-flow}

### If/else statements {#p-if-else}

### For loops {#p-for-loops}

#### `enumerate` {#p-enumerate}

#### `break` {#p-break}

#### `continue` {#p-continue}

### List comprehensions {#p-list-comprehensions}

## Writing functions {#p-writing-functions}

## Reading & Writing data {#p-reading-and-writing-data}

### `read_csv` {#p-read_csv}

`read_csv` is a function from the `pandas` library that allows you to read tabular data into a `pandas` DataFrame.

#### Examples

##### How do I read a csv file called `grades.csv` into a DataFrame? 

<details>
    <summary>Click here for solution</summary>
    
Note that the "." means the current working directory. So, if we were in "/home/john/projects", "./grades.csv" would be the same as "/home/john/projects/grades.csv". This is called a _relative_ path. Read [this](#dots) for a better understanding. 

```{python, eval=T}
import pandas as pd

myDF = pd.read_csv("./grades.csv")
myDF.head()
```
</details>

##### How do I read a csv file called `grades_semi.csv` where instead of being comma-separated, it is semi-colon-separated, into a DataFrame?

<details>
    <summary>Click here for solution</summary>
```{python, eval=T}
import pandas as pd

myDF = pd.read_csv("./grades_semi.csv", sep=";")
myDF.head()
```
</details>

##### How do I specify the type of 1 or more columns when reading in a csv file?

<details>
    <summary>Click here for solution</summary>
```{python, eval=T}
import pandas as pd

myDF = pd.read_csv("./grades.csv")
myDF.dtypes

# as you can see, year is of dtype "object"
# object dtype can hold any Python object
# we know that this column should hold strings
# so let's specify this as we read in the data
myDF = pd.read_csv("./grades.csv", dtype={"year": "string"})
myDF.dtypes

# if we wanted to specify that the "grade"
# column should be float64 instead of int64
# we could do that too
myDF = pd.read_csv("./grades.csv", dtype={"year": "string", "grade": "float64"})
myDF.dtypes

# and you can see that they are indeed floats now
myDF.head()
```
</details>

##### Given a list of csv files with the same columns, how can I read them in and combine them into a single dataframe?

<details>
    <summary>Click here for solution</summary>
```{python, eval=T}
my_csv_files = ["./grades.csv", "./grades2.csv"]

data = []
for file in my_csv_files:
    myDF = pd.read_csv(file)
    data.append(myDF)
    
final_result = pd.concat(data, axis=0)
final_result
```
</details>

### `csv` {#p-csv-pkg}

`csv` is a Python module that is useful for reading and writing tabular data. Much like the `read.csv` function in R, the `csv` module is useful for data that is _like_ csv but not necessarily comma-separated.

To use the `csv` module, simply import it:

```{python, eval=T}
import csv
```

#### Examples

##### How do you print each row of a csv `flights_sample.csv`?

<details>
    <summary>Click here for solution</summary>
```{python, eval=T}
# my_csv_file is the variable holding the file
with open('flights_sample.csv') as my_csv_file:
    my_reader = csv.reader(my_csv_file)
    
    # each "row" here is a list where each 
    # value in the list is an element in the row
    for row in my_reader:
        print(row)
        
    # you can change the word "row" to anything you
    # would like, just make sure to change it everywhere!
    # first, we need to "reset" the file so it starts at the beginning
    my_csv_file.seek(0)
    for my_row in my_reader:
      print(my_row)
```
```{python}
# my_csv_file is the variable holding the file
with open('flights_sample.csv') as my_csv_file:
    my_reader = csv.reader(my_csv_file)
    # instead of printing a list, you can use the "join" 
    # string method to neatly format the output
    for this_row in my_reader:
      print(', '.join(this_row))
```
</details>

##### How do you print each row of a csv `grades_semi.csv`, where instead of being comma-separated, values are semi-colon-separated?

<details>
    <summary>Click here for solution</summary>
```{python, eval=T}
with open('grades_semi.csv') as my_csv_file:
    my_reader = csv.reader(my_csv_file, delimiter=';')
    for row in my_reader:
        print(row)
```
</details>

## `numpy` {#p-numpy}

## `scipy` {#p-scipy}

## `pandas` {#p-pandas}

## Jupyter notebooks {#p-jupyter-notebooks}

## Writing scripts {#p-writing-scripts}

### `argparse` {#p-argparse}

## Scraping {#p-scraping}

## Plotting {#p-plotting}

### `matplotlib` {#p-matplotlib}

#### Resources {#p-matplotlib-resources}

### `plotly` {#p-plotly}

### `plotnine` {#p-plotnine}

### `pygal` {#p-pygal}

### `seaborn` {#p-seaborn}

### `bokeh` {#p-bokeh}

## Classes {#p-classes}

## `tensorflow`

## `pytorch`
