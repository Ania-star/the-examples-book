= TDM 10100: Project 3 -- Fall 2022
Inroduction to R part II

In xref:programming-languges:R:introduction[R] a *data frame* is the primary data structure. It is important to understand how to insert, retrieve, and update data in a *data frames*. 

.Insider Knowlege 
[%collapsible]
====
A *data frame* is a table or a 2D array. Each column containes values or a variable.  Each row contains one set of values for each column. 
====
**Context:** In the previous project we ran our first R code. Learned about accessing data within vectors. +
In this project we will continue to reinforce what we've already learned and introduce a new, flexible data structure called `data.frame`s.

**Scope:** r, data.frames, recycling, factors

.Learning Objectives
****
- Explain what "recycling" is in R and predict behavior of provided statements.
- Explain and demonstrate how R handles missing data: NA, NaN, NULL, etc.
- Demonstrate the ability to use the following functions to solve data-driven problem(s): mean, var, table, cut, paste, rep, seq, sort, order,  length, unique, etc.
- Read and write basic (csv) data.
- Explain and demonstrate: positional, named, and logical indexing.
- List the differences between lists, vectors, factors, and data.frames, and when to use each.
****

Make sure to read about, and use the template found xref:templates.adoc[here], and the important information about projects submissions xref:submissions.adoc[here].


Using the *f2022-s2023-r* kernel 
Lets first see all of the files that are in the Disney folder 
[source,r]
----
list.files(path = "/anvil/projects/tdm/data/disney", pattern = NULL, all.files = FALSE,
           full.names = FALSE, recursive = FALSE,
           ignore.case = FALSE, include.dirs = FALSE, no.. = FALSE)
----

After looking at several of the files we will go ahead and read in the data frame on the 7 Dwarfs Train.
[source,r]
----
myDF <- read.csv("/anvil/projects/tdm/data/disney/7_dwarfs_train.csv", stringsAsFactors = TRUE)
----

If we want to see the file size (aka how large) of the CSV. 
[source,r]
----
file.info("/anvil/projects/tdm/data/disney/7_dwarfs_train.csv")$size
----
You can also use 'file.info' to see other information about the file. 

.Insider Knowledge
[%collapsible]
====
*size*- double: File size in bytes. +
isdir- logical: Is the file a directory? +
*mode*- integer of class "octmode". The file permissions, printed in octal, for example 644. +
*mtime, ctime, atime*- integer of class "POSIXct": file modification, ‘last status change’ and last access times. +
*uid*- integer: the user ID of the file's owner. +
*gid*- integer: the group ID of the file's group. +
*uname*- character: uid interpreted as a user name.
grname +
character: gid interpreted as a group name. Unknown user and group names will be NA. 
====

=== ONE

Familiarizing yourself with the data. 

.Helpful Hint
[%collapsible]
====
You can look at the first 6 rows (`head`) and the last 6 rows (`tail`). The structure (`str`) and/or the dimentions (`dim`) of the dataset. +

*"SACTMIN"* is the actual minuites that a person waited in line +
*"SPOSTMIN"* is the time above the ride estimating the wait time. (Any value that is -999 means that the ride was not in service) +
*"datetime"* is the date and time the information was recorded +
*"date"* is the date of the event 
====

Print the first 11 rows of the data.frame, and take a look at the columns. Based on that, write 1-2 sentences describing the dataset (how many rows, how many columns, the type of data, etc.) and what it holds.


.Items to submit
====
- Code used to solve this problem.
- Output from running the code.
- 1-2 sentences explaining the dataset.
====

=== TWO
Now that we have a better understanding of content and structure of our data. We are diving a bit deeper and making connections within the data.

[loweralpha]
..If we are looking at the column *"SPOSTMIN"* what do you notice about the incraments of time?
.. How many different wait time options do you see?
...

.Helpful Hint
[%collapsible]
====
Use the code below 
[source,r]
----
table(myDF['SPOSTMIN'])
----







On Christmas day what was the average wait time. 
On July 26th what was the average wait time and was there a difference between summer and the holiday. 

[IMPORTANT]
====
R is a case-sensitive language. What this means is that whether or not 1 or more letters in a word are capitalized is important. For example, the following two variables are different.

[source,r]
----
vec <- c(1,2,3)
Vec <- c(3,2,1) # note the capital "V" in our variable name

print(vec) # will print: 1,2,3
print(Vec) # will print: 3,2,1
----

So, when you are examining a `data.frame` and you see a column name that starts with a capital letter, it is critical that you use the same capitalization when trying to access said column. 

[source,r]
----
colnames(iris)
----

----
[1] "Sepal.Length" "Sepal.Width" "Petal.Length" "Petal.Width" "Species"
----

[source,r]
----
iris$"sepal.Length" # will NOT work
iris$"Sepal.length" # will NOT work
iris$"Sepal.Length" # will work
----
====

**Relevant topics:** unique, length

.Items to submit
====
- Code used to solve this problem.
- Output from running the code.
- 1-2 sentences explaining the results.
====

=== Question 3

++++
<iframe class="video" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.79.1/mwEmbedFrame.php/p/983291/uiconf_id/29134031/entry_id/1_fapacg9o?wid=_983291"></iframe>
++++

Create a data.frame called `us_athletes` that contains only information on athletes from the USA. Use the column `NOC` (National Olympic Committee 3-letter code). How many rows does `us_athletes` have?

Now, perform the same operation on the `olympics` data.frame, this time containing only the information on the athletes from the country of your choice. Name this new data.frame appropriately. How many rows does it have?

Now, create a data.frame called `both` that contains the information on the athletes from the USA and the country of your choice. How many rows does it have?

.Items to submit
====
- Code used to solve this problem.
- Output from running the code.
- How many rows or athletes in the `us_athletes` dataset? 
- How many rows or athletes in the other country's dataset? 
- How many rows or athletes in the `both` dataset? 
====

=== Question 4

++++
<iframe class="video" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.79.1/mwEmbedFrame.php/p/983291/uiconf_id/29134031/entry_id/1_4bc65pzr?wid=_983291"></iframe>
++++

++++
<iframe class="video" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.79.1/mwEmbedFrame.php/p/983291/uiconf_id/29134031/entry_id/1_4uzibkfm?wid=_983291"></iframe>
++++

What percentage of US athletes are women? What percentage of US athletes with gold medals are women?

Answer the same questions for your "other" country from question (3).

**Relevant topics:** prop.table, table, indexing

.Items to submit
====
- Code used to solve this problem.
- Output from running the code.
====

=== Question 5

++++
<iframe class="video" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.79.1/mwEmbedFrame.php/p/983291/uiconf_id/29134031/entry_id/1_38avc411?wid=_983291"></iframe>
++++

What is the oldest US athlete to compete based on our `us_athletes` data.frame? At what age, in which sport, and what year did the athlete compete in?

Answer the same questions for your "other" country from question (3) and question (4).

[IMPORTANT]
====
Make sure you using indexing to _only_ print the athlete's information (age, sport, year).
====

.Items to submit
====
- Code used to solve this problem.
- Output from running the code.
- Age, sport, and olympics year that the oldest athlete competed in, for each of your countries.
====

[WARNING]
====
_Please_ make sure to double check that your submission is complete, and contains all of your code and output before submitting. If you are on a spotty internet connection, it is recommended to download your submission after submitting it to make sure what you _think_ you submitted, was what you _actually_ submitted.
====