= TDM 10200: Project 5 -- 2024

**Motivation:** Once we have some data analysis working in Python, we often want to wrap it into a function.  Dr Ward usually tests anything that he wrote (usually 5 times), to make sure it works, before wrapping it into a function.  Once we are sure our analysis works, if we wrap it into a function, it can usually be easier to use.


**Context:**  Functions also help us to put our work into bite-size pieces that are easier to understand.  The basic idea is similar to functions from R or from other languages and tools. 

**Scope:** functions

Make sure to read about, and use the template found xref:templates.adoc[here], and the important information about projects submissions xref:submissions.adoc[here].


== Examples Book Content

Please review the following Examples Book Contents  
- https://the-examples-book.com/programming-languages/python/writing-functions [Python Functions]
- https://the-examples-book.com/programming-languages/python/dictionaries [Python dictionaries]
- https://the-examples-book.com/programming-languages/python/tuples [Python tuples]
- https://the-examples-book.com/programming-languages/python/lists [Python lists]
- https://the-examples-book.com/programming-languages/python/pandas-dataframes [Python pandas DataFrames] 
- https://the-examples-book.com/programming-languages/python/matplotlib [matplotlib]

== Datasets

/anvil/projects/tdm/data/noaa

[NOTE]
====
You can read https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/readme.txt[here] about what the data means.

. 11 character station ID
. 8 character date in YYYYMMDD format
. 4 character element code (you can see the element codes https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/readme.txt[here] in section III)
. value of the data (varies based on the element code)
. 1 character M-flag (10 possible values, see section III https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/readme.txt[here])
. 1 character Q-flag (14 possible values, see section III https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/readme.txt[here])
. 1 character S-flag (30 possible values, see section III https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/readme.txt[here])
. 4 character observation time (HHMM) (0700 = 7:00 AM) -- may be blank
====
 

== Questions

=== Question 1 (2 points)

Read in the dataset from Project 4

/anvil/projects/tdm/data/noaa/2018.csv

and name it `weather_data`.

[loweralpha]
.. Write a function called "averageTemp" that takes 4 parameters: `weather` as a data frame, "start_date" as a string, "end_date" as a string,  temperature element code as string set default vale as TAVG.  outputs twill be a float number of average temperature  
.. Run the function for year 2018 with different date range 

  

=== Question 2 (2 points)


[loweralpha]
.. Run the function "averageTemp" for 3 different year datesets
.. Run the function "averageTemp" for 3 different element_code

 


=== Question 3(2 points)

[loweralpha]

.. Write the function "averageTemp_update" based on "averageTemp", use it to compare two locations' average, you will need to add 2 more parameters: location id1 and id2.  Return will be two average values for the two locations
.. Test your function for 3 year data sets.  

[TIP]
====
For this question, you should not read the full data frame all at once, but instead, you should just a few lines at a time, using the `chunksize = 10000` and the `iterrows` like in the videos.
====


[TIP]
====
It will take a long time to run your function on each year in the data set, so you might want to start by running your function on just a few years, for instance, on 3 years or 5 years, to make sure that things work, before running your function on all of the years.
 
----
total_count = 0
for df in pd.read_csv(putthefilenamehere, chunksize=10000):
    for index, row in df.iterrows():
        if row['Origin'] == myorigin:
            total_count += 1
----
 
====


=== Question 4 (2 points)


[loweralpha]
.. Now write a function "sum_preci" to calculate the sum of precipitation for a selected period. it has 3 augments, a data frame, start date and end end. Return will be sum of precipitation number 
def sum_preci(df, start_date, end_date):
    sample_df = df[(df['date'] >= start_date) & (df['date'] <= end_date) & (df['element_code'] == 'PRCP')]
    return sample_df['value'].sum() 
.. Run the function for 3 year data sets f
[TIP]
====
Again, for this question, you should not read the full data frame all at once, but instead, you should just a few lines at a time, using the `chunksize = 10000` and the `iterrows` like in the videos.
====

[TIP]
====
Again, it will take a long time to run your function on each year in the data set, so you might want to start by running your function on just a few years, for instance, on 3 years or 5 years, to make sure that things work, before running your function on all of the years.
====

Project 05 Assignment Checklist
====
* Jupyter Lab notebook with your code, comments and output for the assignment
    ** `firstname-lastname-project05.ipynb`.
* Python file with code and comments for the assignment
    ** `firstname-lastname-project05.py`

* Submit files through Gradescope
==== 


[WARNING]
====
_Please_ make sure to double check that your submission is complete, and contains all of your code and output before submitting. If you are on a spotty internet connection, it is recommended to download your submission after submitting it to make sure what you _think_ you submitted, was what you _actually_ submitted.
                                                                                                                             
In addition, please review our xref:submissions.adoc[submission guidelines] before submitting your project.
====