=  `lxml` examples with the `otc` data set


[source,python]
----
# Parsing example 1:
 
import lxml.etree
tree = lxml.etree.parse("/anvil/projects/tdm/data/otc/valu.xml")
ingredients = tree.xpath("//ns:ingredient", namespaces = {'ns': 'urn:hl7-org:v3'})
 
# get an ingredient tag
ingredients[0].tag
 
# get the attributes of the ingredient in dict-like object
ingredients[0].attrib
 
# get the the ingredientSubstance element inside the ingredient element
ingredients[0].xpath(".//ns:ingredientSubstance", namespaces = {'ns': 'urn:hl7-org:v3'})[0]
 
# get the children elements of the ingredient element
print(ingredients[0].getchildren())
 
# get all elements with attribute codeSystem
tree.xpath("//ns:*[@codeSystem]", namespaces = {'ns': 'urn:hl7-org:v3'})
 
# get the name tags
names = tree.xpath("//ns:name", namespaces = {'ns': 'urn:hl7-org:v3'})
i=1
# print the content between all name tags
for name_tag in names:
    print(i, ":", name_tag.text)
    i=i+1
----



[source,python]
----
# Parsing example 2:
 
import lxml.etree
tree = lxml.etree.parse("/anvil/projects/tdm/data/otc/hawaii.xml")
ingredients = tree.xpath("//ns:ingredient", namespaces = {'ns': 'urn:hl7-org:v3'})
 
# get an ingredient tag
ingredients[0].tag
 
# get the attributes of the ingredient in dict-like object
ingredients[0].attrib
 
# get the the ingredientSubstance element inside the ingredient element
ingredients[0].xpath(".//ns:ingredientSubstance", namespaces = {'ns': 'urn:hl7-org:v3'})[0]
 
# get the children elements of the ingredient element
ingredients[0].getchildren()
 
# get all elements with attribute codeSystem
tree.xpath("//ns:*[@codeSystem]", namespaces = {'ns': 'urn:hl7-org:v3'})
 
# get the name tags
names = tree.xpath("//ns:name", namespaces = {'ns': 'urn:hl7-org:v3'})
 
# print the content between all name tags
for name_tag in names:
    print(name_tag.text)
----



